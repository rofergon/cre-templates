<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 2080 1340" width="100%" height="100%" style="background:#f3f8fc;font-family:'Segoe UI','Inter',Arial,sans-serif;">
  <defs>
    <filter id="shadow" x="-10%" y="-10%" width="120%" height="120%">
      <feDropShadow dx="0" dy="4" stdDeviation="6" flood-color="#0f172a" flood-opacity="0.12" />
    </filter>

    <linearGradient id="laneWeb2" x1="0" y1="0" x2="1" y2="1">
      <stop offset="0%" stop-color="#ffffff" />
      <stop offset="100%" stop-color="#eaf2ff" />
    </linearGradient>
    <linearGradient id="laneCre" x1="0" y1="0" x2="1" y2="1">
      <stop offset="0%" stop-color="#2a5ada" />
      <stop offset="100%" stop-color="#193db0" />
    </linearGradient>
    <linearGradient id="laneOnchain" x1="0" y1="0" x2="1" y2="1">
      <stop offset="0%" stop-color="#2f3a48" />
      <stop offset="100%" stop-color="#111827" />
    </linearGradient>
    <linearGradient id="laneAce" x1="0" y1="0" x2="1" y2="1">
      <stop offset="0%" stop-color="#ffffff" />
      <stop offset="100%" stop-color="#f3e8ff" />
    </linearGradient>
    <linearGradient id="laneInvestor" x1="0" y1="0" x2="1" y2="1">
      <stop offset="0%" stop-color="#ffffff" />
      <stop offset="100%" stop-color="#ecfeff" />
    </linearGradient>

    <marker id="arrBlue" viewBox="0 0 10 10" refX="8" refY="5" markerWidth="6" markerHeight="6" orient="auto">
      <path d="M 0 0 L 10 5 L 0 10 z" fill="#2563eb" />
    </marker>
    <marker id="arrGreen" viewBox="0 0 10 10" refX="8" refY="5" markerWidth="6" markerHeight="6" orient="auto">
      <path d="M 0 0 L 10 5 L 0 10 z" fill="#10b981" />
    </marker>
    <marker id="arrPurple" viewBox="0 0 10 10" refX="8" refY="5" markerWidth="6" markerHeight="6" orient="auto">
      <path d="M 0 0 L 10 5 L 0 10 z" fill="#7c3aed" />
    </marker>
    <marker id="arrOrange" viewBox="0 0 10 10" refX="8" refY="5" markerWidth="6" markerHeight="6" orient="auto">
      <path d="M 0 0 L 10 5 L 0 10 z" fill="#ea580c" />
    </marker>
    <marker id="arrGray" viewBox="0 0 10 10" refX="8" refY="5" markerWidth="6" markerHeight="6" orient="auto">
      <path d="M 0 0 L 10 5 L 0 10 z" fill="#94a3b8" />
    </marker>
  </defs>

  <text x="1040" y="52" font-size="34" font-weight="700" fill="#0f172a" text-anchor="middle">Private Equity Liquidity Market (ERC-3643 + CRE + ACE)</text>
  <text x="1040" y="82" font-size="15" fill="#475569" text-anchor="middle">Issuer-custodied private rounds, USDC settlement, ACE privacy rail, and global resale compliance controls</text>

  
  <rect x="20" y="120" width="300" height="1100" rx="16" fill="url(#laneWeb2)" stroke="#cbd5e1" stroke-width="2" filter="url(#shadow)" />
  <rect x="440" y="120" width="390" height="1100" rx="16" fill="#ffffff" stroke="#1d4ed8" stroke-width="3" filter="url(#shadow)" />
  <rect x="440" y="120" width="390" height="78" rx="16" fill="url(#laneCre)" />
  <path d="M 440 182 L 830 182 L 830 198 L 440 198 Z" fill="url(#laneCre)" />
  <rect x="950" y="120" width="570" height="1100" rx="16" fill="url(#laneOnchain)" filter="url(#shadow)" />
  <rect x="1640" y="120" width="240" height="1100" rx="16" fill="url(#laneAce)" stroke="#d8b4fe" stroke-width="2" filter="url(#shadow)" />
  <rect x="1900" y="120" width="160" height="1100" rx="16" fill="url(#laneInvestor)" stroke="#99f6e4" stroke-width="2" filter="url(#shadow)" />

  
  <text x="170" y="166" font-size="22" font-weight="700" fill="#334155" text-anchor="middle">Web2 Ops</text>
  <text x="635" y="169" font-size="22" font-weight="700" fill="#ffffff" text-anchor="middle">CRE Orchestration</text>
  <text x="635" y="191" font-size="12" fill="#dbeafe" text-anchor="middle">main.ts + writeReport + HTTP capability</text>
  <text x="1235" y="166" font-size="23" font-weight="700" fill="#ffffff" text-anchor="middle">Onchain Protocol</text>
  <text x="1760" y="166" font-size="22" font-weight="700" fill="#6d28d9" text-anchor="middle">ACE Private Rail</text>
  <text x="1980" y="166" font-size="20" font-weight="700" fill="#0f766e" text-anchor="middle">Investors</text>

  
  <rect x="30" y="212" width="2020" height="30" rx="8" fill="#ffffff" stroke="#cbd5e1" stroke-width="1.5" />
  <text x="55" y="232" font-size="12" font-weight="700" fill="#334155">Phase A: Setup (KYC + investor auth + round config)</text>
  <text x="670" y="232" font-size="12" font-weight="700" fill="#334155">Phase B: Trading (USDC buy -&gt; PENDING)</text>
  <text x="1180" y="232" font-size="12" font-weight="700" fill="#334155">Phase C: ACE settlement/refund</text>
  <text x="1700" y="232" font-size="12" font-weight="700" fill="#334155">Phase D: Secondary controls</text>

  
  <rect x="42" y="265" width="256" height="96" rx="10" fill="#ffffff" stroke="#dbeafe" stroke-width="2" />
  <text x="170" y="296" font-size="16" font-weight="700" fill="#1e293b" text-anchor="middle">Issuer Desk / Admin</text>
  <text x="170" y="316" font-size="11" fill="#64748b" text-anchor="middle">Defines rounds, caps, lockups,</text>
  <text x="170" y="333" font-size="11" fill="#64748b" text-anchor="middle">authorized investors and treasury</text>

  <rect x="42" y="460" width="256" height="264" rx="10" fill="#ffffff" stroke="#dbeafe" stroke-width="2" />
  <text x="170" y="492" font-size="16" font-weight="700" fill="#1e293b" text-anchor="middle">Lambda + DynamoDB</text>
  <text x="170" y="513" font-size="11" fill="#64748b" text-anchor="middle">Actions:</text>
  <text x="170" y="529" font-size="10" fill="#64748b" text-anchor="middle">CompanyInvestorInput</text>
  <text x="170" y="545" font-size="10" fill="#64748b" text-anchor="middle">CompanyRoundInput</text>
  <text x="170" y="561" font-size="10" fill="#64748b" text-anchor="middle">CompanyRoundAllowlistBatchInput</text>
  <text x="170" y="577" font-size="10" fill="#64748b" text-anchor="middle">MarketPurchaseSettlementInput</text>
  <text x="170" y="593" font-size="10" fill="#64748b" text-anchor="middle">MarketPurchaseRefundInput</text>
  <text x="170" y="611" font-size="10" fill="#334155" text-anchor="middle">Stores: investor:*, round:*,</text>
  <text x="170" y="627" font-size="10" fill="#334155" text-anchor="middle">purchase:*, aceSettlement:*</text>

  <rect x="42" y="746" width="256" height="230" rx="10" fill="#ffffff" stroke="#dbeafe" stroke-width="2" />
  <text x="170" y="777" font-size="16" font-weight="700" fill="#1e293b" text-anchor="middle">Settlement Worker</text>
  <text x="170" y="798" font-size="11" fill="#64748b" text-anchor="middle">Consumes PurchaseRequested</text>
  <text x="170" y="815" font-size="11" fill="#64748b" text-anchor="middle">Calls ACE private transfer</text>
  <text x="170" y="832" font-size="11" fill="#64748b" text-anchor="middle">Then triggers settle/refund</text>
  <text x="170" y="850" font-size="10" fill="#0f766e" text-anchor="middle">Idempotent via aceSettlement record</text>

  <rect x="42" y="1000" width="256" height="184" rx="10" fill="#ffffff" stroke="#dbeafe" stroke-width="2" />
  <text x="170" y="1031" font-size="16" font-weight="700" fill="#1e293b" text-anchor="middle">Validation / E2E</text>
  <text x="170" y="1052" font-size="10" fill="#64748b" text-anchor="middle">test:private-rounds-market</text>
  <text x="170" y="1068" font-size="10" fill="#64748b" text-anchor="middle">- unauthorized buy revert</text>
  <text x="170" y="1084" font-size="10" fill="#64748b" text-anchor="middle">- cap exceeded revert</text>
  <text x="170" y="1100" font-size="10" fill="#64748b" text-anchor="middle">- settle transfers USDC treasury</text>
  <text x="170" y="1116" font-size="10" fill="#64748b" text-anchor="middle">- refund transitions to REFUNDED</text>
  <text x="170" y="1132" font-size="10" fill="#64748b" text-anchor="middle">- lockup/global resale blocked</text>

  
  <rect x="460" y="265" width="350" height="88" rx="10" fill="#ecfeff" stroke="#67e8f9" stroke-width="2" />
  <text x="635" y="296" font-size="16" font-weight="700" fill="#155e75" text-anchor="middle">HTTP Trigger</text>
  <text x="635" y="317" font-size="11" fill="#0f766e" text-anchor="middle">Parses company payloads and validates schema</text>
  <text x="635" y="334" font-size="11" fill="#0f766e" text-anchor="middle">(actions 0..17)</text>

  <rect x="460" y="370" width="350" height="380" rx="10" fill="#eff6ff" stroke="#bfdbfe" stroke-width="2" />
  <text x="635" y="480" font-size="17" font-weight="700" fill="#1e3a8a" text-anchor="middle">Action Router (main.ts)</text>
  <text x="635" y="501" font-size="11" fill="#334155" text-anchor="middle">New market actions:</text>
  <text x="635" y="518" font-size="10" fill="#334155" text-anchor="middle">9 auth, 10 lockup, 11 create round, 12 allowlist</text>
  <text x="635" y="534" font-size="10" fill="#334155" text-anchor="middle">13 open, 14 close, 15 settle, 16 refund, 17 set compliance</text>
  <text x="635" y="552" font-size="10" fill="#334155" text-anchor="middle">ABI encoding -&gt; report bytes -&gt; writeReport()</text>
  <text x="635" y="570" font-size="10" fill="#334155" text-anchor="middle">Also supports ACE_PRIVATE_TRANSFER / ACE_WITHDRAW_TICKET</text>
  <text x="635" y="588" font-size="10" fill="#334155" text-anchor="middle">using EIP-712 signatures</text>
  <rect x="488" y="605" width="294" height="130" rx="8" fill="#ffffff" stroke="#cbd5e1" stroke-width="1" />
  <text x="635" y="625" font-size="10" font-weight="700" fill="#475569" text-anchor="middle">Log triggers watch</text>
  <text x="635" y="721" font-size="10" fill="#64748b" text-anchor="middle">IdentityRegistry + PrivateEmployeeEquity + ComplianceV2 + PrivateRoundsMarket</text>

  <rect x="460" y="772" width="350" height="202" rx="10" fill="#f5f3ff" stroke="#c4b5fd" stroke-width="2" />
  <text x="635" y="803" font-size="16" font-weight="700" fill="#5b21b6" text-anchor="middle">ACE HTTP Capability</text>
  <text x="635" y="824" font-size="11" fill="#6d28d9" text-anchor="middle">Signs and posts to ACE API endpoints</text>
  <text x="635" y="841" font-size="11" fill="#6d28d9" text-anchor="middle">/private-transfer and /withdraw</text>
  <text x="635" y="858" font-size="10" fill="#7c3aed" text-anchor="middle">Domain: CompliantPrivateTokenDemo (Sepolia)</text>

  <rect x="460" y="996" width="350" height="188" rx="10" fill="#eef2ff" stroke="#a5b4fc" stroke-width="2" />
  <text x="635" y="1027" font-size="16" font-weight="700" fill="#312e81" text-anchor="middle">Operational Paths</text>
  <text x="635" y="1048" font-size="10" fill="#4338ca" text-anchor="middle">Production: report() -&gt; receiver via forwarder</text>
  <text x="635" y="1064" font-size="10" fill="#4338ca" text-anchor="middle">Local test: direct onReport (bypass forwarder)</text>
  <text x="635" y="1083" font-size="10" fill="#4338ca" text-anchor="middle">Settlement OK: action 15 mark settled</text>
  <text x="635" y="1099" font-size="10" fill="#4338ca" text-anchor="middle">Settlement fail: action 16 refund</text>
  <text x="635" y="1115" font-size="10" fill="#4338ca" text-anchor="middle">Token compliance switch: action 17</text>
  <text x="635" y="1131" font-size="10" fill="#4338ca" text-anchor="middle">Global transfer rules enforced by ComplianceV2</text>

  
  <rect x="970" y="265" width="530" height="105" rx="10" fill="#4f46e5" stroke="#818cf8" stroke-width="2" />
  <text x="1235" y="297" font-size="18" font-weight="700" fill="#ffffff" text-anchor="middle">EquityWorkflowReceiver</text>
  <text x="1235" y="318" font-size="11" fill="#e0e7ff" text-anchor="middle">Dispatches actions 0..17 to protocol modules</text>
  <text x="1235" y="335" font-size="11" fill="#e0e7ff" text-anchor="middle">Owner of Token + IdentityRegistry, oracle in market/equity modules</text>
  <text x="1235" y="352" font-size="11" fill="#e0e7ff" text-anchor="middle">SYNC_REDEEM_TICKET remains disabled by design</text>

  <rect x="970" y="466" width="210" height="172" rx="10" fill="#0b2535" stroke="#38bdf8" stroke-width="2" />
  <text x="1075" y="497" font-size="14" font-weight="700" fill="#e0f2fe" text-anchor="middle">ComplianceV2</text>
  <text x="1075" y="517" font-size="10" fill="#bae6fd" text-anchor="middle">authorizedInvestor</text>
  <text x="1075" y="534" font-size="10" fill="#bae6fd" text-anchor="middle">investorLockupUntil</text>
  <text x="1075" y="551" font-size="10" fill="#bae6fd" text-anchor="middle">trustedCounterparties</text>
  <text x="1075" y="568" font-size="10" fill="#bae6fd" text-anchor="middle">canTransfer(): global rule</text>
  <text x="1075" y="585" font-size="10" fill="#bae6fd" text-anchor="middle">KYC + auth + lockup checks</text>
  <text x="1075" y="602" font-size="10" fill="#bae6fd" text-anchor="middle">(regulatory unwind allowed)</text>

  <rect x="1290" y="466" width="210" height="172" rx="10" fill="#052e16" stroke="#34d399" stroke-width="2" />
  <text x="1395" y="497" font-size="14" font-weight="700" fill="#ecfdf5" text-anchor="middle">PrivateRoundsMarket</text>
  <text x="1395" y="517" font-size="10" fill="#a7f3d0" text-anchor="middle">create/open/close rounds</text>
  <text x="1395" y="534" font-size="10" fill="#a7f3d0" text-anchor="middle">allowlist + per-investor cap</text>
  <text x="1395" y="551" font-size="10" fill="#a7f3d0" text-anchor="middle">buyRound -&gt; PENDING</text>
  <text x="1395" y="568" font-size="10" fill="#a7f3d0" text-anchor="middle">markPurchaseSettled -&gt; treasury</text>
  <text x="1395" y="585" font-size="10" fill="#a7f3d0" text-anchor="middle">refundPurchase / refundByOracle</text>
  <text x="1395" y="602" font-size="10" fill="#a7f3d0" text-anchor="middle">status: PENDING/SETTLED/REFUNDED</text>

  <rect x="970" y="735" width="210" height="150" rx="10" fill="#111827" stroke="#22c55e" stroke-width="2" />
  <text x="1075" y="766" font-size="14" font-weight="700" fill="#f8fafc" text-anchor="middle">Token ERC-3643</text>
  <text x="1075" y="786" font-size="10" fill="#bbf7d0" text-anchor="middle">transfer/transferFrom call</text>
  <text x="1075" y="803" font-size="10" fill="#bbf7d0" text-anchor="middle">ComplianceV2.canTransfer()</text>
  <text x="1075" y="820" font-size="10" fill="#bbf7d0" text-anchor="middle">Global resale restrictions</text>
  <text x="1075" y="837" font-size="10" fill="#bbf7d0" text-anchor="middle">setCompliance via action 17</text>
  <text x="1075" y="854" font-size="10" fill="#bbf7d0" text-anchor="middle">freeze controls remain available</text>

  <rect x="1290" y="735" width="210" height="150" rx="10" fill="#334155" stroke="#94a3b8" stroke-width="1.8" />
  <text x="1395" y="766" font-size="14" font-weight="700" fill="#f8fafc" text-anchor="middle">IdentityRegistry</text>
  <text x="1395" y="786" font-size="10" fill="#cbd5e1" text-anchor="middle">KYC source of truth</text>
  <text x="1395" y="803" font-size="10" fill="#cbd5e1" text-anchor="middle">verified identities + country</text>
  <text x="1395" y="820" font-size="10" fill="#cbd5e1" text-anchor="middle">used by token/compliance</text>

  <rect x="970" y="982" width="210" height="202" rx="10" fill="#1f2937" stroke="#9ca3af" stroke-width="1.8" />
  <text x="1075" y="1013" font-size="14" font-weight="700" fill="#f8fafc" text-anchor="middle">MockUSDC (6 decimals)</text>
  <text x="1075" y="1033" font-size="10" fill="#d1d5db" text-anchor="middle">Buyer approves market</text>
  <text x="1075" y="1050" font-size="10" fill="#d1d5db" text-anchor="middle">buyRound escrows USDC</text>
  <text x="1075" y="1067" font-size="10" fill="#d1d5db" text-anchor="middle">settled -&gt; USDC treasury</text>
  <text x="1075" y="1084" font-size="10" fill="#d1d5db" text-anchor="middle">refund -&gt; USDC buyer</text>

  <rect x="1290" y="982" width="210" height="202" rx="10" fill="#082f49" stroke="#38bdf8" stroke-width="1.8" />
  <text x="1395" y="1013" font-size="14" font-weight="700" fill="#e0f2fe" text-anchor="middle">PrivateEmployeeEquity</text>
  <text x="1395" y="1033" font-size="10" fill="#bae6fd" text-anchor="middle">ACE vault integration</text>
  <text x="1395" y="1050" font-size="10" fill="#bae6fd" text-anchor="middle">employment + goal + cliff</text>
  <text x="1395" y="1067" font-size="10" fill="#bae6fd" text-anchor="middle">claim gating before redeem</text>
  <text x="1395" y="1084" font-size="10" fill="#bae6fd" text-anchor="middle">ticket redeem remains wallet-driven</text>

  
  <rect x="1660" y="265" width="200" height="240" rx="10" fill="#ffffff" stroke="#d8b4fe" stroke-width="2" />
  <text x="1760" y="296" font-size="16" font-weight="700" fill="#5b21b6" text-anchor="middle">ACE API</text>
  <text x="1760" y="317" font-size="10" fill="#6d28d9" text-anchor="middle">/private-transfer</text>
  <text x="1760" y="334" font-size="10" fill="#6d28d9" text-anchor="middle">/withdraw /shielded-address</text>
  <text x="1760" y="351" font-size="10" fill="#6d28d9" text-anchor="middle">EIP-712 authenticated requests</text>
  <text x="1760" y="368" font-size="10" fill="#6d28d9" text-anchor="middle">private balances + tx ids</text>
  <text x="1760" y="465" font-size="10" fill="#7c3aed" text-anchor="middle">vault policy checks enforced</text>

  <rect x="1660" y="523" width="200" height="270" rx="10" fill="#ffffff" stroke="#d8b4fe" stroke-width="2" />
  <text x="1760" y="554" font-size="15" font-weight="700" fill="#5b21b6" text-anchor="middle">Settlement Decision</text>
  <text x="1760" y="575" font-size="10" fill="#6d28d9" text-anchor="middle">ACE transfer success</text>
  <text x="1760" y="592" font-size="10" fill="#6d28d9" text-anchor="middle">-&gt; send action 15 (SETTLED)</text>
  <text x="1760" y="610" font-size="10" fill="#6d28d9" text-anchor="middle">ACE failure/timeout</text>
  <text x="1760" y="627" font-size="10" fill="#6d28d9" text-anchor="middle">-&gt; send action 16 (REFUNDED)</text>
  <text x="1760" y="725" font-size="10" fill="#7c3aed" text-anchor="middle">No USDC trapped without route</text>
  <text x="1760" y="742" font-size="10" fill="#7c3aed" text-anchor="middle">for resolution</text>

  <rect x="1660" y="810" width="200" height="374" rx="10" fill="#faf5ff" stroke="#c084fc" stroke-width="2" />
  <text x="1760" y="841" font-size="15" font-weight="700" fill="#6d28d9" text-anchor="middle">Privacy Outcome</text>
  <text x="1760" y="862" font-size="10" fill="#7c3aed" text-anchor="middle">Investor token allocations</text>
  <text x="1760" y="879" font-size="10" fill="#7c3aed" text-anchor="middle">can stay private on ACE rail</text>
  <text x="1760" y="977" font-size="10" fill="#7c3aed" text-anchor="middle">while compliance remains</text>
  <text x="1760" y="994" font-size="10" fill="#7c3aed" text-anchor="middle">enforced globally on token</text>
  <text x="1760" y="1012" font-size="10" fill="#7c3aed" text-anchor="middle">payment (USDC) visibility</text>
  <text x="1760" y="1029" font-size="10" fill="#7c3aed" text-anchor="middle">is accepted in this phase</text>

  
  <rect x="1915" y="265" width="130" height="240" rx="10" fill="#ffffff" stroke="#99f6e4" stroke-width="2" />
  <text x="1980" y="296" font-size="14" font-weight="700" fill="#0f766e" text-anchor="middle">Authorized</text>
  <text x="1980" y="314" font-size="14" font-weight="700" fill="#0f766e" text-anchor="middle">Investor</text>
  <text x="1980" y="334" font-size="10" fill="#0f766e" text-anchor="middle">KYC + allowlist</text>
  <text x="1980" y="351" font-size="10" fill="#0f766e" text-anchor="middle">Buys round with USDC</text>
  <text x="1980" y="368" font-size="10" fill="#0f766e" text-anchor="middle">Receives private token flow</text>
  <text x="1980" y="465" font-size="10" fill="#0f766e" text-anchor="middle">Can later redeem ticket</text>

  <rect x="1915" y="523" width="130" height="240" rx="10" fill="#ffffff" stroke="#99f6e4" stroke-width="2" />
  <text x="1980" y="554" font-size="14" font-weight="700" fill="#0f766e" text-anchor="middle">Unauthorized</text>
  <text x="1980" y="572" font-size="14" font-weight="700" fill="#0f766e" text-anchor="middle">Address</text>
  <text x="1980" y="592" font-size="10" fill="#0f766e" text-anchor="middle">Buy rejected</text>
  <text x="1980" y="609" font-size="10" fill="#0f766e" text-anchor="middle">Transfer receive rejected</text>
  <text x="1980" y="626" font-size="10" fill="#0f766e" text-anchor="middle">by ComplianceV2</text>

  <rect x="1915" y="810" width="130" height="374" rx="10" fill="#ffffff" stroke="#99f6e4" stroke-width="2" />
  <text x="1980" y="841" font-size="14" font-weight="700" fill="#0f766e" text-anchor="middle">Secondary</text>
  <text x="1980" y="859" font-size="14" font-weight="700" fill="#0f766e" text-anchor="middle">Resale Rules</text>
  <text x="1980" y="879" font-size="10" fill="#0f766e" text-anchor="middle">Lockup active:</text>
  <text x="1980" y="976" font-size="10" fill="#0f766e" text-anchor="middle">sender transfer blocked</text>
  <text x="1980" y="994" font-size="10" fill="#0f766e" text-anchor="middle">Lockup expired:</text>
  <text x="1980" y="1011" font-size="10" fill="#0f766e" text-anchor="middle">transfer allowed only</text>
  <text x="1980" y="1028" font-size="10" fill="#0f766e" text-anchor="middle">to authorized investors</text>

  
  
  <path d="M 298 313 L 460 313" fill="none" stroke="#2563eb" stroke-width="3" marker-end="url(#arrBlue)" />

  
  <path d="M 810 510 L 940 510 L 940 317 L 970 317" fill="none" stroke="#2563eb" stroke-width="3" stroke-linejoin="round" marker-end="url(#arrBlue)" />

  
  <path d="M 1075 370 L 1075 466" fill="none" stroke="#94a3b8" stroke-width="2" marker-end="url(#arrGray)" />
  <path d="M 1395 370 L 1395 466" fill="none" stroke="#94a3b8" stroke-width="2" marker-end="url(#arrGray)" />

  
  <path d="M 1915 351 L 1885 351 L 1885 512 L 1630 512 L 1630 525 L 1500 525" fill="none" stroke="#ea580c" stroke-width="3" stroke-linejoin="round" marker-end="url(#arrOrange)" />

  
  <path d="M 1180 1050 L 1287 1050 L 1287 551 L 1290 551" fill="none" stroke="#ea580c" stroke-width="3" stroke-linejoin="round" marker-end="url(#arrOrange)" />

  
  <path d="M 1290 595 L 1235 595 L 1235 724 L 830 724 L 830 760 L 430 760 L 430 807 L 298 807" fill="none" stroke="#10b981" stroke-width="3" stroke-linejoin="round" marker-end="url(#arrGreen)" />

  
  <path d="M 298 834 L 460 834" fill="none" stroke="#7c3aed" stroke-width="3" marker-end="url(#arrPurple)" />

  
  <path d="M 810 845 L 950 845 L 950 971 L 1635 971 L 1635 334 L 1660 334" fill="none" stroke="#7c3aed" stroke-width="3" stroke-linejoin="round" marker-end="url(#arrPurple)" />

  
  <path d="M 1660 609 L 1625 609 L 1625 728 L 940 728 L 940 609 L 810 609" fill="none" stroke="#7c3aed" stroke-width="3" stroke-linejoin="round" marker-end="url(#arrPurple)" />

  
  <path d="M 810 552 L 945 552 L 945 458 L 1395 458 L 1395 466" fill="none" stroke="#2563eb" stroke-width="3" stroke-linejoin="round" marker-end="url(#arrBlue)" />

  
  <path d="M 1410 638 L 1410 724 L 1510 724 L 1510 973 L 1395 973 L 1395 982" fill="none" stroke="#94a3b8" stroke-width="2" stroke-linejoin="round" marker-end="url(#arrGray)" />

  
  <path d="M 1385 638 L 1385 722 L 1183 722 L 1183 1067 L 1180 1067" fill="none" stroke="#10b981" stroke-width="3" stroke-linejoin="round" marker-end="url(#arrGreen)" />

  
  <path d="M 1370 638 L 1370 640 L 1181 640 L 1181 1084 L 1180 1084" fill="none" stroke="#ea580c" stroke-width="3" stroke-dasharray="5 5" stroke-linejoin="round" marker-end="url(#arrOrange)" />

  
  <path d="M 1180 585 L 1289 585 L 1289 726 L 1520 726 L 1520 516 L 1890 516 L 1890 609 L 1915 609" fill="none" stroke="#2563eb" stroke-width="3" stroke-linejoin="round" marker-end="url(#arrBlue)" />

  
  <path d="M 1180 820 L 1289 820 L 1289 975 L 1520 975 L 1520 801 L 1880 801 L 1880 976 L 1915 976" fill="none" stroke="#2563eb" stroke-width="3" stroke-linejoin="round" marker-end="url(#arrBlue)" />

  
  <rect x="20" y="1310" width="2040" height="22" rx="8" fill="#ffffff" stroke="#cbd5e1" stroke-width="1" />
  <line x1="40" y1="1321" x2="80" y2="1321" stroke="#2563eb" stroke-width="3" marker-end="url(#arrBlue)" />
  <text x="88" y="1325" font-size="10" fill="#334155">Onchain control/update path</text>
  <line x1="315" y1="1321" x2="455" y2="1321" stroke="#10b981" stroke-width="3" marker-end="url(#arrGreen)" />
  <text x="463" y="1325" font-size="10" fill="#334155">Event sync / reconciliation path</text>
  <line x1="720" y1="1321" x2="760" y2="1321" stroke="#7c3aed" stroke-width="3" marker-end="url(#arrPurple)" />
  <text x="768" y="1325" font-size="10" fill="#334155">ACE private rail and settlement decision</text>
  <line x1="1310" y1="1321" x2="1350" y2="1321" stroke="#ea580c" stroke-width="3" marker-end="url(#arrOrange)" />
  <text x="1358" y="1325" font-size="10" fill="#334155">Trading/payment path (USDC visible onchain)</text>
</svg>